<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steve Plexz | Premium Store</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    
    <style>
        /* --- GLOBAL SETTINGS --- */
        body { background-color: #f8f9fa; font-family: 'Inter', sans-serif; padding-top: 80px; overflow-x: hidden; }
        
        /* --- PRO NAVIGATION --- */
        .navbar { 
            background: rgba(255, 255, 255, 0.95); 
            backdrop-filter: blur(10px); 
            border-bottom: 1px solid rgba(0,0,0,0.05); 
            padding: 15px 0;
            box-shadow: 0 4px 20px rgba(0,0,0,0.02);
        }
        .navbar-brand { font-weight: 800; letter-spacing: -0.5px; font-size: 1.5rem; cursor: pointer; color: #111; text-decoration: none; }
        .text-primary { color: #0d6efd !important; }

        .nav-link-pro {
            color: #111; font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px;
            text-decoration: none; position: relative; padding: 5px 0; margin: 0 10px; transition: color 0.3s;
        }
        .nav-link-pro::after {
            content: ''; position: absolute; width: 0; height: 2px; bottom: 0; left: 0; background-color: #0d6efd; transition: width 0.3s ease;
        }
        .nav-link-pro:hover::after { width: 100%; }
        .nav-link-pro:hover { color: #0d6efd; }

        .nav-icon-btn { color: #333; font-size: 1.3rem; margin: 0 8px; transition: all 0.2s ease; background: none; border: none; padding: 0; }
        .nav-icon-btn:hover { color: #0d6efd; transform: translateY(-2px); }

        .btn-sell-pro {
            background-color: #111; color: #fff; font-size: 0.85rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px;
            padding: 10px 25px; border-radius: 50px; border: none; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(0,0,0,0.1); margin-left: 15px;
        }
        .btn-sell-pro:hover { background-color: #333; transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.15); color: #fff; }

        /* --- HERO BANNER --- */
        .hero-section { position: relative; height: 550px; padding: 0; margin-bottom: 0; border-radius: 0 0 40px 40px; overflow: hidden; z-index: 1; }
        .hero-section .carousel-item img { height: 550px; object-fit: cover; filter: brightness(0.5); }
        .hero-text-overlay { position: absolute; top: 40%; left: 50%; transform: translate(-50%, -50%); z-index: 10; color: white; text-align: center; width: 100%; }

        /* --- NEW: PRO OVERLAP CARDS WITH EFFECTS --- */
        .overlap-container {
            position: relative;
            z-index: 10;
            margin-top: -100px;
            margin-bottom: 50px;
        }

        .frame-card {
            background: #fff;
            padding: 12px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
            height: 100%;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(0,0,0,0.02);
        }

        /* Lift and Glow on Hover */
        .frame-card:hover {
            transform: translateY(-15px);
            box-shadow: 0 20px 50px rgba(0,0,0,0.15);
        }

        .frame-img-wrapper {
            border-radius: 12px;
            overflow: hidden;
            height: 180px;
            position: relative;
            /* The Border Frame */
            border: 2px solid transparent; 
            transition: border-color 0.3s ease;
        }

        /* Highlight border on hover */
        .frame-card:hover .frame-img-wrapper {
            border-color: #0d6efd; 
        }

        .frame-img-wrapper img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s ease;
        }

        /* Zoom Effect */
        .frame-card:hover .frame-img-wrapper img {
            transform: scale(1.15);
        }

        /* THE "SHEEN" / LIGHT WIPE EFFECT */
        .frame-img-wrapper::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 50%;
            height: 100%;
            background: linear-gradient(to right, rgba(255,255,255,0) 0%, rgba(255,255,255,0.3) 100%);
            transform: skewX(-25deg);
            z-index: 2;
            transition: none; /* Reset transition for quick reset */
        }

        .frame-card:hover .frame-img-wrapper::before {
            left: 150%;
            transition: 0.7s ease; /* Speed of the light wipe */
        }

        /* Label Styling */
        .frame-label {
            text-align: center;
            margin-top: 15px;
            font-weight: 800;
            font-size: 0.9rem;
            color: #111;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .frame-label i {
            opacity: 0;
            transform: translateX(-5px);
            transition: all 0.3s ease;
            color: #0d6efd;
        }

        .frame-card:hover .frame-label i {
            opacity: 1;
            transform: translateX(0);
        }

        /* Staggered Entrance Animation */
        .frame-animate {
            animation: popIn 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            opacity: 0;
            transform: translateY(30px);
        }
        
        @keyframes popIn {
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- MARKETPLACE GRID --- */
        .pro-card { background: #ffffff; border-radius: 20px; overflow: hidden; position: relative; box-shadow: 0 10px 25px rgba(0,0,0,0.05); transition: all 0.3s ease; height: 100%; display: flex; flex-direction: column; cursor: pointer; }
        .pro-card:hover { transform: translateY(-8px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        .card-badge { position: absolute; top: 15px; right: 15px; font-size: 10px; font-weight: 700; padding: 5px 10px; border-radius: 8px; text-transform: uppercase; z-index: 2; }
        
        .img-box { background: #f8f9fa; height: 250px; display: flex; align-items: center; justify-content: center; padding: 20px; perspective: 1000px; }
        .img-box img { max-width: 100%; max-height: 200px; object-fit: contain; transition: transform 1.2s ease-in-out; filter: drop-shadow(0 10px 10px rgba(0,0,0,0.1)); transform-style: preserve-3d; }
        .pro-card:hover .img-box img { transform: rotateY(360deg) scale(1.1); }

        .card-details { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .product-title { font-size: 16px; font-weight: 700; color: #111; margin-bottom: 5px; }
        .product-specs-preview { font-size: 11px; color: #6c757d; margin-bottom: 15px; background: #f8f9fa; padding: 8px; border-radius: 8px; }
        .spec-line { display: block; margin-bottom: 2px; }

        .price { font-size: 18px; font-weight: 800; color: #111; }
        .btn-buy { text-decoration: none; background-color: #111; color: #fff; padding: 8px 20px; border-radius: 30px; font-size: 12px; font-weight: 600; transition: background 0.2s; border: none; }
        .btn-buy:hover { background-color: #333; color: #fff; }

        /* --- MOBILE OPTIMIZATIONS (The 2-Column "Desktop-Like" Grid) --- */
        @media (max-width: 768px) {
            .row.g-4 { --bs-gutter-x: 0.8rem; --bs-gutter-y: 0.8rem; }
            .frame-img-wrapper { height: 140px; }
            .frame-label { font-size: 0.8rem; margin-top: 10px; letter-spacing: 0.5px; }
            .img-box { height: 160px; padding: 10px; }
            .img-box img { max-height: 130px; }
            .card-details { padding: 12px; }
            .product-title { font-size: 14px; margin-bottom: 3px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
            .product-specs-preview { display: none; } 
            .price { font-size: 15px; }
            .btn-buy { padding: 6px 12px; font-size: 11px; width: 100%; margin-top: 5px; text-align: center; }
            .card-badge { top: 8px; right: 8px; font-size: 9px; padding: 3px 6px; }
            .hero-section { height: 400px; border-radius: 0 0 30px 30px; }
            .hero-section .carousel-item img { height: 400px; }
            .hero-text-overlay { width: 90%; }
            .hero-text-overlay h1 { font-size: 2.5rem; }
        }

        /* --- FOOTER & EXTRAS --- */
        .discuss-card { border: 1px solid #dee2e6; border-radius: 12px; padding: 25px 20px 20px; position: relative; margin-bottom: 25px; margin-top: 15px; background: #fff; }
        .discuss-title { position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background-color: #fff; padding: 0 15px; color: #6c757d; font-size: 14px; white-space: nowrap; }
        .btn-chat { border-radius: 8px; font-size: 14px; transition: transform 0.2s; }
        .btn-chat:hover { transform: translateY(-2px); }
        .btn-whatsapp { background-color: #25D366; border: none; color: white; }
        .btn-whatsapp:hover { background-color: #20bd5a; color: white; }
        .btn-sms { background-color: #0d6efd; border: none; color: white; }
        .btn-sms:hover { background-color: #0b5ed7; color: white; }
        
        .payment-icon { height: 35px; width: auto; object-fit: contain; }
        .payment-box { background: #fff; padding: 5px 10px; border-radius: 6px; display: flex; align-items: center; justify-content: center; }
        
        .animate-fade { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        footer a:hover { color: #fff !important; text-decoration: underline !important; }
    </style>
</head>
<body class="d-flex flex-column min-vh-100">

    <!-- PRO NAVIGATION -->
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <!-- UPDATED: Brand now links to index.html -->
            <a class="navbar-brand" href="index.html">STEVE <span class="text-primary">PLEXZ</span></a>
            
            <div class="d-flex align-items-center gap-2">
                <!-- Cart Icon visible on mobile outside toggle -->
                <button class="nav-icon-btn position-relative d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#cartDrawer">
                    <i class="bi bi-bag"></i>
                    <span id="mobile-cart-badge" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" style="display: none; font-size: 0.6rem;">0</span>
                </button>

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>
            
            <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                <div class="d-flex flex-column flex-lg-row align-items-center mt-3 mt-lg-0">
                    <a href="#" class="nav-link-pro d-block d-lg-inline mb-2 mb-lg-0" onclick="goHome()">Marketplace</a>
                    
                    <div class="d-none d-lg-block" style="width: 1px; height: 20px; background: #ddd; margin: 0 15px;"></div>

                    <button class="nav-icon-btn d-none d-lg-inline" title="Wishlist"><i class="bi bi-heart"></i></button>
                    <button class="nav-icon-btn d-none d-lg-inline" title="Account"><i class="bi bi-person"></i></button>

                    <!-- Desktop Cart -->
                    <button class="nav-icon-btn position-relative d-none d-lg-inline" type="button" data-bs-toggle="offcanvas" data-bs-target="#cartDrawer" title="Cart">
                        <i class="bi bi-bag"></i>
                        <span id="cart-badge" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger nav-badge" style="display: none;">0</span>
                    </button>

                    <button class="btn-sell-pro w-100 w-lg-auto mt-2 mt-lg-0" data-bs-toggle="modal" data-bs-target="#uploadModal">
                        Sell Item
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- HERO SECTION -->
    <header class="hero-section" id="hero-section">
        <div id="heroCarousel" class="carousel slide carousel-fade h-100" data-bs-ride="carousel" data-bs-interval="3000">
            <div class="carousel-inner h-100">
                <div class="carousel-item active h-100"><img src="images/laptop.jpg" class="d-block w-100" alt="Laptop"></div>
                <div class="carousel-item h-100"><img src="images/watch.jpg" class="d-block w-100" alt="Watch"></div>
                <div class="carousel-item h-100"><img src="images/camera.jpg" class="d-block w-100" alt="Camera"></div>
            </div>
        </div>
        <div class="hero-text-overlay">
            <h1 class="display-4 fw-bold">Curated Gadgets</h1>
            <p class="lead text-white-50">Premium affiliate deals & exclusive products</p>
        </div>
    </header>

    <!-- NEW: PRO OVERLAP CARDS (Clickable but No Link) -->
    <div class="container overlap-container">
        <div class="row g-4 justify-content-center">
            <!-- Frame 1: Audio -->
            <div class="col-6 col-md-3 frame-animate" style="animation-delay: 0s;">
                <div class="frame-card">
                    <div class="frame-img-wrapper">
                        <img src="images/headphone.jpg" alt="Audio">
                    </div>
                    <div class="frame-label">Premium Audio <i class="bi bi-arrow-right d-none d-md-inline"></i></div>
                </div>
            </div>
            <!-- Frame 2: Luxury -->
            <div class="col-6 col-md-3 frame-animate" style="animation-delay: 0.15s;">
                <div class="frame-card">
                    <div class="frame-img-wrapper">
                        <img src="images/watch.jpg" alt="Watches">
                    </div>
                    <div class="frame-label">Luxury Watches <i class="bi bi-arrow-right d-none d-md-inline"></i></div>
                </div>
            </div>
            <!-- Frame 3: Home -->
            <div class="col-6 col-md-3 frame-animate" style="animation-delay: 0.3s;">
                <div class="frame-card">
                    <div class="frame-img-wrapper">
                        <img src="images/sofa.jpg" alt="Home">
                    </div>
                    <div class="frame-label">Modern Home <i class="bi bi-arrow-right d-none d-md-inline"></i></div>
                </div>
            </div>
            <!-- Frame 4: Phones -->
            <div class="col-6 col-md-3 frame-animate" style="animation-delay: 0.45s;">
                <div class="frame-card">
                    <div class="frame-img-wrapper">
                        <img src="images/iphone.jpg" alt="Phones">
                    </div>
                    <div class="frame-label">Smartphones <i class="bi bi-arrow-right d-none d-md-inline"></i></div>
                </div>
            </div>
        </div>
    </div>

    <!-- MARKETPLACE VIEW -->
    <div id="marketplace-view" class="container my-5 flex-grow-1">
        <div id="filter-bar" class="row mb-5 align-items-center bg-white p-3 rounded-4 shadow-sm mx-1">
            <div class="col-md-4 mb-3 mb-md-0">
                <div class="input-group"><span class="input-group-text bg-light border-0"><i class="bi bi-search"></i></span><input type="text" id="searchInput" class="form-control border-0 bg-light" placeholder="Search products..."></div>
            </div>
            <div class="col-md-8 d-flex gap-2 justify-content-md-end overflow-auto">
                <select id="categoryFilter" class="form-select w-auto border-0 bg-light fw-bold" onchange="applyFilters()"><option value="all">All Categories</option><option value="Electronics">Electronics</option><option value="Fashion">Fashion</option><option value="Home">Home & Living</option><option value="Other">Other</option></select>
                <button class="btn btn-dark rounded-pill px-3 filter-btn" data-type="all" onclick="setFilterType('all')">All</button>
                <button class="btn btn-outline-dark rounded-pill px-3 filter-btn" data-type="Own" onclick="setFilterType('Own')">My Store</button>
                <button class="btn btn-outline-dark rounded-pill px-3 filter-btn" data-type="Affiliate" onclick="setFilterType('Affiliate')">Partners</button>
            </div>
        </div>
        <div class="row g-4" id="product-grid"></div>
    </div>

    <!-- PRODUCT DETAIL VIEW -->
    <div id="product-detail-view" class="container my-5 flex-grow-1 d-none animate-fade">
        <button class="btn btn-outline-dark mb-4 rounded-pill px-4" onclick="goHome()"><i class="bi bi-arrow-left"></i> Back to Store</button>
        <div class="row g-5">
            <div class="col-md-6">
                <div class="detail-img-box" style="background-color: #fff; padding: 40px; border-radius: 30px; text-align: center; box-shadow: 0 10px 40px rgba(0,0,0,0.05); height: 500px; display: flex; align-items: center; justify-content: center; perspective: 1500px;">
                    <img id="detail-img" src="" class="img-fluid" alt="Product" style="max-height: 400px; width: auto; max-width: 100%; filter: drop-shadow(0 20px 20px rgba(0,0,0,0.1)); transition: transform 1.5s; transform-style: preserve-3d; cursor: pointer;" onmouseover="this.style.transform='rotateY(360deg) scale(1.05)'" onmouseout="this.style.transform='rotateY(0deg) scale(1)'">
                </div>
                <div class="text-center mt-3 small text-muted"><i class="bi bi-arrow-repeat me-1"></i> Hover to rotate 3D</div>
            </div>
            <div class="col-md-6">
                <div class="d-flex gap-2 mb-3"><span id="detail-category" class="badge bg-secondary">Category</span><span id="detail-badge" class="badge">BADGE</span></div>
                <h1 id="detail-title" class="fw-bold display-5 mb-2">Product Title</h1>
                <h3 id="detail-price" class="text-primary fw-bold mb-4">$0.00</h3>
                <div class="p-4 bg-white rounded-4 shadow-sm mb-4">
                    <h6 class="fw-bold text-uppercase text-muted small mb-3">Specifications</h6>
                    <table class="w-100 specs-table" id="detail-specs-table"></table>
                </div>
                <div class="discuss-card">
                    <span class="discuss-title">Discuss with the seller</span>
                    <div class="row g-2">
                        <div class="col-6"><a id="btn-whatsapp" href="#" target="_blank" class="btn btn-whatsapp w-100 py-2 d-flex align-items-center justify-content-center gap-2 btn-chat"><i class="bi bi-whatsapp fs-4"></i><div class="d-flex flex-column lh-1 text-start"><span class="small fw-bold">Via WhatsApp</span><span style="font-size: 10px; opacity: 0.9;">Chat directly</span></div></a></div>
                        <div class="col-6"><a id="btn-sms" href="#" class="btn btn-sms w-100 py-2 d-flex align-items-center justify-content-center gap-2 btn-chat"><i class="bi bi-chat-text fs-4"></i><div class="d-flex flex-column lh-1 text-start"><span class="small fw-bold">Via SMS</span><span style="font-size: 10px; opacity: 0.9;">Send message</span></div></a></div>
                    </div>
                </div>
                <div class="d-flex gap-2 align-items-stretch">
                    <div class="border rounded-3 d-flex align-items-center justify-content-center bg-white" style="width: 70px;"><input type="number" class="form-control border-0 text-center p-0 bg-transparent fw-bold" value="1" min="1" style="width: 100%;"></div>
                    <div id="detail-btn-container" class="flex-grow-1"></div>
                    <button class="btn btn-outline-dark rounded-3 px-3 d-flex align-items-center"><i class="bi bi-heart"></i></button>
                </div>
                <p class="text-muted text-center small mt-3"><i class="bi bi-shield-check"></i> Secure transaction & Fast Delivery</p>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="bg-dark text-white pt-5 pb-3 mt-auto">
        <div class="container">
            <div class="row g-4">
                <div class="col-md-4"><h5 class="fw-bold">STEVE <span class="text-primary">PLEXZ</span></h5><p class="text-white-50 small">The ultimate destination for premium tech, curated affiliate deals, and community-driven commerce.</p></div>
                <div class="col-md-4"><h6 class="text-uppercase fw-bold mb-3">Quick Links</h6><ul class="list-unstyled small text-white-50"><li><a href="#" onclick="goHome()" class="text-reset text-decoration-none mb-2 d-block">Marketplace</a></li><li><a href="#" data-bs-toggle="modal" data-bs-target="#uploadModal" class="text-reset text-decoration-none mb-2 d-block">Sell an Item</a></li></ul></div>
                <div class="col-md-4"><h6 class="text-uppercase fw-bold mb-3">Admin</h6><p class="small text-white-50">Manage your store products via the "Sell Item" dashboard or delete items directly from the grid.</p></div>
            </div>
            <div class="row mt-5">
                <div class="col-12 text-center"><div class="d-flex justify-content-center align-items-center gap-3 flex-wrap"><div class="payment-box"><img src="https://upload.wikimedia.org/wikipedia/commons/9/93/New-mtn-logo.jpg" alt="MTN" class="payment-icon"></div><div class="payment-box"><img src="https://upload.wikimedia.org/wikipedia/commons/c/c8/Orange_logo.svg" alt="Orange" class="payment-icon"></div><div class="payment-box"><img src="https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg" alt="PayPal" class="payment-icon"></div><div class="payment-box"><img src="https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg" alt="Visa" class="payment-icon"></div><div class="payment-box"><img src="https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg" alt="MasterCard" class="payment-icon"></div></div></div>
            </div>
            <div class="border-top border-secondary mt-4 pt-3 text-center small text-white-50">&copy; 2026 Steve Plexz Inc. All rights reserved.</div>
        </div>
    </footer>

    <!-- CART DRAWER -->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="cartDrawer"><div class="offcanvas-header border-bottom"><h5 class="offcanvas-title fw-bold">Your Bag</h5><button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button></div><div class="offcanvas-body d-flex flex-column"><div id="cart-items-container" class="flex-grow-1 overflow-auto"></div><div class="border-top pt-3 mt-3"><div class="d-flex justify-content-between align-items-center mb-3"><span class="text-muted">Subtotal</span><span class="fw-bold fs-5" id="cart-total">$0.00</span></div><div class="d-grid"><button id="triggerCheckoutBtn" class="btn btn-dark py-3 rounded-pill fw-bold">Proceed to Checkout</button></div></div></div></div>
    
    <!-- CHECKOUT MODAL -->
    <div class="modal fade" id="checkoutModal" tabindex="-1" aria-hidden="true" data-bs-backdrop="static"><div class="modal-dialog modal-lg modal-dialog-centered"><div class="modal-content border-0 shadow-lg rounded-4"><div class="modal-header border-0 pb-0"><h5 class="modal-title fw-bold">Secure Checkout</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body p-4"><form id="finalCheckoutForm"><div class="row g-4"><div class="col-md-7 border-end"><h6 class="text-uppercase text-muted fw-bold small mb-3">Shipping Details</h6><div class="row g-2 mb-3"><div class="col-6"><input type="text" class="form-control bg-light border-0 py-2" placeholder="First Name" required></div><div class="col-6"><input type="text" class="form-control bg-light border-0 py-2" placeholder="Last Name" required></div></div><div class="mb-3"><input type="email" class="form-control bg-light border-0 py-2" placeholder="Email Address" required></div><div class="mb-3"><input type="text" class="form-control bg-light border-0 py-2" placeholder="Street Address" required></div><div class="row g-2 mb-4"><div class="col-6"><input type="text" class="form-control bg-light border-0 py-2" placeholder="City" required></div><div class="col-6"><input type="text" class="form-control bg-light border-0 py-2" placeholder="Zip Code" required></div></div><h6 class="text-uppercase text-muted fw-bold small mb-3">Payment Method</h6><div class="d-flex gap-3"><div class="form-check p-3 bg-light rounded-3 w-100"><input class="form-check-input" type="radio" name="paymentMethod" id="payCard" checked><label class="form-check-label fw-bold small" for="payCard"><i class="bi bi-credit-card me-2"></i>Card</label></div><div class="form-check p-3 bg-light rounded-3 w-100"><input class="form-check-input" type="radio" name="paymentMethod" id="payCash"><label class="form-check-label fw-bold small" for="payCash"><i class="bi bi-cash-coin me-2"></i>COD</label></div></div></div><div class="col-md-5"><h6 class="text-uppercase text-muted fw-bold small mb-3">Order Summary</h6><div id="checkout-summary" class="mb-3" style="max-height: 200px; overflow-y: auto;"></div><div class="border-top pt-3"><div class="d-flex justify-content-between mb-1"><span class="text-muted small">Subtotal</span><span class="fw-bold small" id="checkout-subtotal">$0.00</span></div><div class="d-flex justify-content-between mb-3"><span class="text-muted small">Shipping</span><span class="fw-bold small text-success">Free</span></div><div class="d-flex justify-content-between"><span class="fw-bold">Total</span><span class="fw-bold fs-5 text-primary" id="checkout-final-total">$0.00</span></div></div><button type="submit" id="placeOrderBtn" class="btn btn-dark w-100 py-3 rounded-pill mt-4 fw-bold shadow-sm">Confirm Order</button></div></div></form></div></div></div></div>
    
    <!-- UPLOAD MODAL -->
    <div class="modal fade" id="uploadModal" tabindex="-1" aria-hidden="true"><div class="modal-dialog modal-dialog-centered"><div class="modal-content border-0 shadow-lg" style="border-radius: 20px;"><div class="modal-header border-0 pb-0"><h5 class="modal-title fw-bold">Add New Product</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body p-4"><form id="uploadForm"><div class="mb-3"><label class="form-label text-muted small fw-bold">PRODUCT TITLE</label><input type="text" id="pTitle" class="form-control bg-light border-0 py-2" placeholder="e.g. iPhone 15" required></div><div class="row g-2 mb-3"><div class="col-6"><label class="form-label text-muted small fw-bold">PRICE ($)</label><input type="number" id="pPrice" class="form-control bg-light border-0 py-2" placeholder="999.00" required></div><div class="col-6"><label class="form-label text-muted small fw-bold">CATEGORY</label><select id="pCategory" class="form-select bg-light border-0 py-2"><option value="Electronics">Electronics</option><option value="Fashion">Fashion</option><option value="Home">Home & Living</option><option value="Other">Other</option></select></div></div><div class="mb-3"><label class="form-label text-muted small fw-bold">IMAGE URL</label><input type="url" id="pImage" class="form-control bg-light border-0 py-2" placeholder="Main Image URL" required></div><div class="mb-3"><label class="form-label text-muted small fw-bold">PRODUCT TYPE</label><select id="pType" class="form-select bg-light border-0 py-2"><option value="Affiliate">Affiliate Link (External)</option><option value="Own">My Product (Direct Sell)</option></select></div><div class="d-grid"><button type="submit" class="btn btn-dark rounded-pill fw-bold py-2">Upload Product</button></div></form></div></div></div></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        const STORAGE_KEY = 'stevePlexz_usd_v11';
        const SELLER_PHONE = '237678938576'; 

        const defaultProducts = [
            { id: 1, title: "iPhone 15 Pro Max", image: "images/iphone.jpg", specs: { "Storage": "512GB", "Color": "Natural Titanium", "Chip": "A17 Pro", "Display": "6.7-inch Super Retina XDR", "Camera": "48MP Main | 5x Telephoto", "Model": "US Spec (eSIM Only)", "Condition": "Brand New" }, price: 1399.00, category: "Electronics", badge: "HOT", type: "Own" },
            { id: 2, title: "Sony WH-1000XM5", image: "images/headphone.jpg", specs: { "Color": "Black", "Battery Life": "30 Hours", "Noise Cancelling": "Industry Leading ANC", "Connectivity": "Bluetooth 5.2", "Weight": "250g", "Charging": "USB-C Fast Charge" }, price: 348.00, category: "Electronics", badge: "AFFILIATE", type: "Affiliate", link: "https://amazon.com" },
            { id: 3, title: "Air Jordan 1 High", image: "images/shoe.jpg", specs: { "Size": "10 US / 44 EU", "Colorway": "Chicago (Lost & Found)", "Upper Material": "Leather", "Outsole": "Rubber", "Condition": "Brand New in Box", "Release Year": "2022" }, price: 180.00, category: "Fashion", badge: "STEVE PLEXZ", type: "Own" },
            { id: 4, title: "MacBook Air M2", image: "images/laptop.jpg", specs: { "Processor": "Apple M2 Chip", "RAM": "16GB Unified Memory", "Storage": "512GB SSD", "Color": "Midnight", "Screen": "13.6 Liquid Retina", "Keyboard": "US Layout" }, price: 1099.00, category: "Electronics", badge: "SALE", type: "Own" },
            { id: 5, title: "Canon EOS R5", image: "images/camera.jpg", specs: { "Type": "Mirrorless Body Only", "Sensor": "45MP Full-Frame CMOS", "Video": "8K RAW Recording", "Stabilization": "In-Body 5-Axis", "Card Slots": "CFexpress & SD UHS-II", "Mount": "RF Mount" }, price: 3899.00, category: "Electronics", badge: "AFFILIATE", type: "Affiliate", link: "https://amazon.com" },
            { id: 6, title: "Modern Grey Sofa", image: "images/sofa.jpg", specs: { "Capacity": "3-Seater", "Dimensions": "210cm x 90cm x 85cm", "Material": "Premium Linen Fabric", "Frame": "Solid Wood", "Cushion Fill": "High Density Foam", "Assembly": "Legs Only" }, price: 899.00, category: "Home", badge: "NEW", type: "Own" },
            { id: 7, title: "PlayStation 5", image: "images/ps5.jpg", specs: { "Edition": "Standard Disc Edition", "Storage": "825GB Custom SSD", "Performance": "4K 120Hz Output", "Audio": "Tempest 3D AudioTech", "Controller": "DualSense Wireless", "Region": "Global" }, price: 499.00, category: "Electronics", badge: "STOCK LOW", type: "Own" },
            { id: 8, title: "Ray-Ban Aviator", image: "images/glasses.jpg", specs: { "Model": "RB3025 Classic", "Lens Color": "G-15 Green", "Frame Color": "Gold", "Size": "Standard (58mm)", "Protection": "100% UV Protection", "Origin": "Made in Italy" }, price: 160.00, category: "Fashion", badge: "AFFILIATE", type: "Affiliate", link: "https://amazon.com" },
            { id: 9, title: "Dyson V15 Detect", image: "images/vacuum.jpg", specs: { "Model": "V15 Detect Absolute", "Technology": "Laser Slim Fluffy™", "Suction Power": "240 AW", "Runtime": "Up to 60 Minutes", "Weight": "3.1 kg", "Bin Volume": "0.77 L" }, price: 749.00, category: "Home", badge: "AFFILIATE", type: "Affiliate", link: "https://amazon.com" },
            { id: 10, title: "Rolex Submariner", image: "images/watch.jpg", specs: { "Reference": "126610LN", "Movement": "Perpetual, mechanical", "Case Size": "41mm", "Material": "Oystersteel", "Water Resistance": "300m / 1000ft", "Bezel": "Cerachrom Ceramic" }, price: 12500.00, category: "Fashion", badge: "EXCLUSIVE", type: "Own" },
            { id: 11, title: "Herman Miller Aeron", image: "images/chair.jpg", specs: { "Size": "Size B (Medium)", "Color": "Graphite", "Support": "PostureFit SL", "Tilt": "Tilt Limiter & Forward Tilt", "Arms": "Fully Adjustable Arms", "Casters": "Carpet Casters" }, price: 1400.00, category: "Home", badge: "PRO", type: "Own" },
            { id: 12, title: "Gucci Leather Belt", image: "images/belt.jpg", specs: { "Material": "Smooth Black Leather", "Width": "4cm", "Buckle": "Shiny Gold-toned Double G", "Size": "90cm / 36in", "Origin": "Made in Italy", "Style": "Casual / Formal" }, price: 450.00, category: "Fashion", badge: "STEVE PLEXZ", type: "Own" },
            { id: 13, title: "sofa table", image: "images/sofa table.jpg", specs: { "Display": "6.8-inch QHD+", "Camera": "200MP Main", "Processor": "Snapdragon 8 Gen 3", "Battery": "5000mAh" }, price: 1299.00, category: "Electronics", badge: "HOT", type: "Own" },
            { id: 14, title: "bofa", image: "images/bofa.jpg", specs: { "Resolution": "3840 x 2160", "Refresh Rate": "144Hz", "Size": "32-inch", "Panel": "IPS" }, price: 699.00, category: "Electronics", badge: "NEW", type: "Own" },
            { id: 15, title: "Coach", image: "images/Coach.jpg", specs: { "Connectivity": "Wi-Fi / Bluetooth", "Colors": "16 Million", "Voice Control": "Alexa / Google", "Power": "10W" }, price: 55.00, category: "Home", badge: "SALE", type: "Own" },
            { id: 16, title: "rolex", image: "images/rolex.jpg", specs: { "Material": "Waterproof Nylon", "Laptop Compartment": "15.6 inch", "Weight": "0.8kg", "Style": "Urban Minimalist" }, price: 120.00, category: "Fashion", badge: "PREMIUM", type: "Own" }
            { id: 17, title: "rolex", image: "images/rolex.jpg", specs: { "Material": "Waterproof Nylon", "Laptop Compartment": "15.6 inch", "Weight": "0.8kg", "Style": "Urban Minimalist" }, price: 120.00, category: "Fashion", badge: "PREMIUM", type: "Own" }
        ];

        let products = JSON.parse(localStorage.getItem(STORAGE_KEY)) || defaultProducts;
        if (!products || products.length === 0) products = defaultProducts;
        let cart = [];
        let typeFilter = 'all';

        function saveData() { localStorage.setItem(STORAGE_KEY, JSON.stringify(products)); }
        function formatPrice(price) { return '$' + price.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2}); }
        function goHome() {
            document.getElementById('product-detail-view').classList.add('d-none');
            document.getElementById('marketplace-view').classList.remove('d-none');
            document.getElementById('hero-section').classList.remove('d-none');
            window.scrollTo(0, 0);
        }

        function scrollToGrid() {
            document.getElementById('product-grid').scrollIntoView({ behavior: 'smooth' });
        }

        function openDetail(id) {
            const p = products.find(x => x.id === id);
            if (!p) return;

            document.getElementById('detail-title').innerText = p.title;
            document.getElementById('detail-price').innerText = formatPrice(p.price);
            document.getElementById('detail-category').innerText = p.category;
            document.getElementById('detail-badge').innerText = p.badge;
            document.getElementById('detail-img').src = p.image;

            const table = document.getElementById('detail-specs-table');
            table.innerHTML = "";
            if (p.specs) {
                for (const [key, value] of Object.entries(p.specs)) {
                    table.innerHTML += `<tr><td>${key}</td><td>${value}</td></tr>`;
                }
            } else {
                table.innerHTML = `<tr><td colspan="2">No detailed specs available.</td></tr>`;
            }

            const msg = encodeURIComponent(`Hello, I am interested in ${p.title} (${formatPrice(p.price)}) on your store.`);
            document.getElementById('btn-whatsapp').href = `https://wa.me/${SELLER_PHONE}?text=${msg}`;
            document.getElementById('btn-sms').href = `sms:+${SELLER_PHONE}?body=${msg}`;

            const btnContainer = document.getElementById('detail-btn-container');
            btnContainer.innerHTML = p.type === 'Affiliate' 
                ? `<a href="${p.link}" target="_blank" class="btn btn-dark w-100 py-2 fw-bold" style="height:100%; display:flex; align-items:center; justify-content:center;">Buy on Partner Site</a>` 
                : `<button onclick="addToCart(${p.id})" class="btn btn-dark w-100 py-2 fw-bold" style="height:100%;">Buy this product</button>`;

            document.getElementById('marketplace-view').classList.add('d-none');
            document.getElementById('hero-section').classList.add('d-none');
            document.getElementById('product-detail-view').classList.remove('d-none');
            window.scrollTo(0, 0);
        }

        function applyFilters() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const category = document.getElementById('categoryFilter').value;
            let filtered = products.filter(p => p.title.toLowerCase().includes(search) && (category === 'all' || p.category === category) && (typeFilter === 'all' || p.type === typeFilter));
            renderGrid(filtered);
        }

        function setFilterType(type) {
            typeFilter = type;
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.toggle('btn-dark', btn.dataset.type === type);
                btn.classList.toggle('btn-outline-dark', btn.dataset.type !== type);
            });
            applyFilters();
        }

        function renderGrid(data) {
            const grid = document.getElementById('product-grid');
            grid.innerHTML = ""; 
            if (data.length === 0) { grid.innerHTML = `<div class="col-12 text-center py-5"><h4 class="text-muted">No products found...</h4></div>`; return; }
            data.forEach(p => {
                const btnText = p.type === 'Affiliate' ? 'View on Partner' : 'Add to Cart';
                let specPreview = p.specs ? Object.keys(p.specs).slice(0, 3).map(k => `<span class="spec-line">• ${k}: ${p.specs[k]}</span>`).join("") : "";
                
                // CRITICAL CHANGE FOR MOBILE GRID: Using col-6 (2 columns) for mobile screens
                grid.innerHTML += `
                    <div class="col-6 col-md-4 col-lg-3 mb-4">
                        <div class="pro-card">
                            <span class="card-badge" style="${p.type === 'Affiliate' ? 'background: #eef2ff; color: #4338ca;' : 'background: #f0f8ff; color: #0066cc;'}">${p.badge}</span>
                            <div class="img-box" onclick="openDetail(${p.id})">
                                <img src="${p.image}" alt="${p.title}" onerror="this.onerror=null;this.src='https://via.placeholder.com/200?text=Image+Missing';">
                            </div>
                            <div class="card-details">
                                <div onclick="openDetail(${p.id})">
                                    <h5 class="product-title">${p.title}</h5>
                                    <div class="product-specs-preview">${specPreview}</div>
                                </div>
                                <div class="price-row">
                                    <span class="price">${formatPrice(p.price)}</span>
                                    <button onclick="handleQuickAction('${p.type}', ${p.id}, '${p.link}')" class="btn-buy">${btnText}</button>
                                </div>
                            </div>
                        </div>
                    </div>`;
            });
        }
        
        function updateCartUI() {
            const badge = document.getElementById('cart-badge');
            const mobileBadge = document.getElementById('mobile-cart-badge'); // Update the mobile badge too
            const container = document.getElementById('cart-items-container');
            const totalEl = document.getElementById('cart-total');
            const checkoutBtn = document.getElementById('triggerCheckoutBtn');
            
            // Logic for badges
            const showBadge = cart.length > 0 ? 'block' : 'none';
            if (badge) { badge.style.display = showBadge; badge.innerText = cart.length; }
            if (mobileBadge) { mobileBadge.style.display = showBadge; mobileBadge.innerText = cart.length; }

            let total = cart.reduce((sum, item) => sum + item.price, 0);
            totalEl.innerText = formatPrice(total);
            checkoutBtn.disabled = cart.length === 0;
            checkoutBtn.innerText = cart.length === 0 ? "Bag is Empty" : "Proceed to Checkout";
            container.innerHTML = "";
            if (cart.length === 0) { container.innerHTML = `<div class="text-center mt-5 text-muted"><i class="bi bi-bag-x" style="font-size: 4rem;"></i><p class="mt-3">Your bag is empty.</p></div>`; return; }
            cart.forEach((item, index) => {
                container.innerHTML += `
                    <div class="d-flex align-items-center mb-3 pb-3 border-bottom">
                        <img src="${item.image}" style="width: 60px; height: 60px; object-fit: contain; background: #f8f9fa; border-radius: 8px;">
                        <div class="ms-3 flex-grow-1"><h6 class="mb-0 fw-bold small">${item.title}</h6><span class="text-muted small">${formatPrice(item.price)}</span></div>
                        <button onclick="cart.splice(${index}, 1); updateCartUI();" class="btn btn-sm btn-link text-danger"><i class="bi bi-trash-fill"></i></button>
                    </div>`;
            });
        }

        function addToCart(id) {
            const product = products.find(p => p.id === id);
            if (product) { cart.push(product); updateCartUI(); new bootstrap.Offcanvas(document.getElementById('cartDrawer')).show(); }
        }
        function handleQuickAction(type, id, link = '#') { if (type === 'Own') addToCart(id); else window.open(link, '_blank'); }

        document.addEventListener('DOMContentLoaded', () => {
            applyFilters(); updateCartUI();
            document.getElementById('searchInput').addEventListener('input', applyFilters);
            document.getElementById('uploadForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const newProduct = {
                    id: Date.now(), title: document.getElementById('pTitle').value, image: document.getElementById('pImage').value, 
                    specs: { "Description": "User uploaded item" }, price: parseFloat(document.getElementById('pPrice').value),
                    category: document.getElementById('pCategory').value, type: document.getElementById('pType').value,
                    link: document.getElementById('pLink').value || "#", badge: "NEW"
                };
                products.unshift(newProduct); saveData(); applyFilters(); this.reset();
                bootstrap.Modal.getInstance(document.getElementById('uploadModal')).hide(); alert("Product Added");
            });
            document.getElementById('triggerCheckoutBtn').addEventListener('click', function() {
                if (cart.length === 0) return;
                const summary = document.getElementById('checkout-summary'); let total = 0; summary.innerHTML = "";
                cart.forEach(item => { total += item.price; summary.innerHTML += `<div class="d-flex justify-content-between"><small>${item.title}</small><small>${formatPrice(item.price)}</small></div>`; });
                document.getElementById('checkout-subtotal').innerText = formatPrice(total);
                document.getElementById('checkout-final-total').innerText = formatPrice(total);
                bootstrap.Offcanvas.getInstance(document.getElementById('cartDrawer')).hide();
                new bootstrap.Modal(document.getElementById('checkoutModal')).show();
            });
            document.getElementById('finalCheckoutForm').addEventListener('submit', function(e) {
                e.preventDefault(); alert("Order Confirmed! Thank you."); cart = []; updateCartUI();
                bootstrap.Modal.getInstance(document.getElementById('checkoutModal')).hide(); goHome();
            });
        });
    </script>
</body>
</html>